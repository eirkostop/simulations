<!DOCTYPE html>

<html>

<head>
<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0">
<title>Φύλλο εργασίας 1</title>

<link rel="stylesheet" href="../fonts/BPtypewrite.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
<style>

#deskDIV    {overflow: hidden;
transition:width 1s;
-webkit-transition:width 1s;
}

.half {
width:50%;
float:left;
}
@media only screen and (max-width:500px) {
  /* For mobile phones: */
  .half-full {
    width:100%;
  }}


.myCanvas-button {
padding: .4em .5em;
display: inline-block;
position: relative;
line-height: normal;
margin-right: .1em;
cursor: pointer;
vertical-align: middle;
text-align: center;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
overflow: visible;
}
.container {
    position: relative;
    text-align: center;clear: left;

}
.measurement {
	position: absolute;
    left: 35%;
    transform: translate(-50%, -50%);
    font-size:1.5vw;
	color:#008982}

	#sum {
	position: absolute;
    left: 35%;
	top: 87%;
    transform: translate(-50%, -50%);
    font-size:1.5vw;
	color:#008982}

	#average {
	position: absolute;
    left: 78%;
	top: 47%;
    transform: translate(-50%, -50%);
    font-size:1.5vw;
	color:#008982}

body{max-width:1000px; margin-left:auto; margin-right:auto; color:#333;
font-family: BPTypewrite,sans-serif,'Arial Narrow';margin-top:auto;background:transparent; font-size:16px;}

</style></head>

<body>
<div style="background:white; border:#ccc 2px solid; border-radius:5px; text-align:center;padding: 5px 0 5px 0;min-height:500px">
<div class="half half-full" style=" float: left; text-align:center;"><span style="font-weight:bold">
Φύλλο εργασίας 1 <hr style="height:2px;border-width:0;background-color:#ccc"></span></div>

<div class="half half-full" style=" float: left; text-align:center;" >
<span>&copy Περί ΦυσιQuiz</span><hr style="height:2px;border-width:0;background-color:#ccc;">
</div>
<div class="half">
<p>Μετακίνησε το χάρακα για να μετρήσεις το μήκος του θρανίου με ακρίβεια χιλιοστού (π.χ. 119.7cm).
</p>
<p>Μέτρηση: <input id="measurement" type="number" name="measurement" placeholder="π.χ. 119.7" step="0.1" min="0.1" max="999999999" >cm.
<br><i class="fa fa-check myCanvas-button"  style="color:#333" onclick="writeMeasurement();" title="Καταχώρηση μέτρησης"></i>
<i class="fa fa-times myCanvas-button"  style="color:#333" onclick="clearMeasurement();" title="Ακύρωση μέτρησης"></i>
<i class="fas fa-undo myCanvas-button"  style="color:#333" onclick="reset();" title="Επαναφορά"></i>
<i class="fa fa-calculator myCanvas-button"  style="color:#333" onclick="calculate();" title="Υπολόγισε τη μέση τιμή"></i>
<i id="hide-button" class="fa fa-eye-slash myCanvas-button"  style="color:#333" onclick="hideDIV();" title="Κρύψε το θρανίο"></i>
</p>
<div class="container" >
<img src="fe1.png" alt=" Φύλλο εργασίας 1" style="width:100%;">
<p class="measurement" id="1" style="top:15%"></p>
<p class="measurement" id="2" style="top:22.2%"></p>
<p class="measurement" id="3" style="top:29.4%"></p>
<p class="measurement" id="4" style="top:36.6%"></p>
<p class="measurement" id="5" style="top:43.8%"></p>
<p class="measurement" id="6" style="top:51.0%"></p>
<p class="measurement" id="7" style="top:58.2%"></p>
<p class="measurement" id="8" style="top:65.4%"></p>
<p class="measurement" id="9" style="top:72.6%"></p>
<p class="measurement" id="10" style="top:79.8%"></p>
<p id="sum"></p>	<p id="average"></p>
</div>
</div>
<div id="deskDIV" class="half">
<canvas id="desk" style="width:100%"></canvas>
</div>&nbsp;</div>
<p id="demo"></p>
<script>
var d=document.getElementById('desk')
var dctx = d.getContext("2d");
var pointerX,pointerY,scale=1;
var cornerRadius=5;var distanceX,distanceY,pointerX0,pointerY0;
var xr=18,yr=20;
var cornerRadius = 5;
var xmeasurements=[];

d.addEventListener('mousedown', mouseDown, false);
window.addEventListener('mouseup', mouseUp, false);
d.addEventListener('touchstart', touchStart, false);
d.addEventListener('touchmove', touchMove, false);

function initialize() {
window.addEventListener('resize', resizeCanvas, false);
resizeCanvas();
}
function resizeCanvas() {
			if(window.innerWidth<=1000){
			scale=(window.innerWidth-4)/996;
			d.width=996*scale;d.height=1000*scale;
			dctx.scale(2*scale,2*scale);
			}
			if(window.innerWidth>1000){
			scale=1;
			d.width = 996; d.height=1000;
			dctx.scale(2,2);			}



dctx.save();
drawGlass();
dctx.restore();
drawDesk();
drawRuler();
dctx.rect(376,8,31,25);
dctx.moveTo(376,32);
dctx.lineTo(17,120);
dctx.moveTo(407,33);
dctx.lineTo(481,121);
dctx.stroke();
}

initialize();


function writeMeasurement(){
var measurement=Number(document.getElementById("measurement").value).toFixed(1);
if(xmeasurements.length<10&&measurement<1000000000&&measurement>0){
xmeasurements.push(measurement);
document.getElementById(xmeasurements.length).innerHTML=xmeasurements[xmeasurements.length-1];
}
}
function clearMeasurement(){if(xmeasurements.length<11&&xmeasurements.length>0){
document.getElementById("sum").innerHTML="";
document.getElementById("average").innerHTML="";
document.getElementById(xmeasurements.length).innerHTML="";
xmeasurements.pop();
}}

function reset(){for (i=0; i<xmeasurements.length; i++){
document.getElementById(i+1).innerHTML="";}
document.getElementById("sum").innerHTML="";
document.getElementById("average").innerHTML="";
xmeasurements=[];
}
function calculate(){
var xsum=0,n=0;
for (i=0; i<xmeasurements.length; i++){xsum+=Number(xmeasurements[i]);n++}
document.getElementById("sum").innerHTML=xsum.toFixed(1);
document.getElementById("average").innerHTML=(xsum/n).toFixed(2);
}

function hideDIV(){
this.toggle = !this.toggle;
var target = document.getElementById('deskDIV');
if( this.toggle) {
newWidth=target.style.width;
target.style.width= 0+"px";
document.getElementById('hide-button').classList.remove("fa-eye-slash");
document.getElementById('hide-button').classList.add("fa-eye");
document.getElementById('hide-button').title="Δείξε το θρανίο";
}
else {
target.style.width =newWidth;
document.getElementById('hide-button').classList.remove("fa-eye");
document.getElementById('hide-button').classList.add("fa-eye-slash");
document.getElementById('hide-button').title="Κρύψε το θρανίο";
}
}

function touchStart(event){
pointerX = (event.targetTouches[0].pageX-d.offsetLeft)/scale;
pointerY = (event.targetTouches[0].pageY-d.offsetTop)/scale;
event.preventDefault();
pointerX0=pointerX;
pointerY0=pointerY;
d.addEventListener('touchmove', touchMove, false);
}
function touchMove(event) {
event.preventDefault();
pointerX = (event.targetTouches[0].pageX-d.offsetLeft)/scale;
pointerY = (event.targetTouches[0].pageY-d.offsetTop)/scale;
distanceX=pointerX-pointerX0;
distanceY=pointerY-pointerY0;
if(pointerX0<xr+460&&pointerX0>xr&&pointerY0>yr&&pointerY0<yr+20){
xr=xr+distanceX;
yr=yr+distanceY;
}
if(pointerY0>15*yr&&pointerY0<15*(yr+20)){
xr=xr+distanceX/15;
yr=yr+distanceY/15;
}
pointerX0=pointerX;
pointerY0=pointerY;
dctx.save();
dctx.clearRect(0,0,500,500);
drawGlass();
drawDesk();
drawRuler();
dctx.rect(376,8,31,25);dctx.stroke();
}

function mouseDown (event){
pointerX = (event.pageX-d.offsetLeft)/scale;
pointerY = (event.pageY-d.offsetTop)/scale;
event.preventDefault();
pointerX0=pointerX;
pointerY0=pointerY;
d.addEventListener('mousemove', moveRuler, false);
}

function moveRuler(event){
pointerX = (event.pageX-d.offsetLeft)/scale;
pointerY = (event.pageY-d.offsetTop)/scale;
event.preventDefault();
distanceX=pointerX-pointerX0;
distanceY=pointerY-pointerY0;
if(pointerX0<xr+460&&pointerX0>xr&&pointerY0>yr&&pointerY0<yr+20){
xr=xr+distanceX;
yr=yr+distanceY;
}
if(pointerY0>15*yr&&pointerY0<15*(yr+20)){
xr=xr+distanceX/15;
yr=yr+distanceY/15;
}
pointerX0=pointerX;
pointerY0=pointerY;
dctx.clearRect(0,0,500,500);
dctx.save();
drawGlass();
dctx.restore();
drawDesk();
drawRuler();
dctx.rect(376,8,31,25);dctx.stroke();
}

function mouseUp(event){
event.preventDefault();
d.removeEventListener('mousemove', moveRuler, false);
}

function drawDesk(){
drawRect(38,10,360,102);
dctx.fillStyle="#CF912E";
dctx.fill();
drawRect(40,10,358,100);

dctx.fillStyle="#D2E8D7";
dctx.fill();

}
function drawRuler(){drawRect(xr,yr,460,20);drawMajorGridlines(xr,yr);}
//Draw gridlines

function drawMajorGridlines(xr,yr){
dctx.beginPath();

dctx.lineWidth=0.2;
dctx.strokeStyle="#333";
for (j=0; j<31;j++){
dctx.moveTo(xr+5+15*j,yr);
dctx.lineTo(xr+5+15*j,yr+5);
}
dctx.stroke();
dctx.beginPath();
dctx.fillStyle="#333";
dctx.font = "6px Georgia";
for (j=0;j<15;j++){
dctx.fillText(j*10,xr+3+30*j,yr+10);}
dctx.stroke();
}

function drawGridlines(xr,yr){
dctx.beginPath();
dctx.font = "8px Georgia";
dctx.fillStyle="#333";
dctx.lineWidth=0.05;
dctx.strokeStyle="#333";
for (j=0; j<151;j++){
dctx.moveTo(xr+5+3*j,yr);
dctx.lineTo(xr+5+3*j,yr+3);
}
for (j=0; j<301;j++){
dctx.moveTo(xr+5+1.5*j,yr);
dctx.lineTo(xr+5+1.5*j,yr+2);
}
dctx.stroke();
}

function drawMinorGridlines(xr,yr){
dctx.beginPath();
dctx.font = "8px Georgia";
dctx.fillStyle="#333";
dctx.lineWidth=0.01;
dctx.strokeStyle="#333";
for (j=0; j<1501;j++){
dctx.moveTo(xr+5+0.3*j,yr);
dctx.lineTo(xr+5+0.3*j,yr+1);
}
dctx.stroke();
}
function drawGlass(){
dctx.beginPath();
dctx.scale(15,15);
dctx.rect(376-375,8,31,25);dctx.lineWidth=0.05;dctx.stroke();
dctx.clip();
drawRect(-335,10,358,100); dctx.fillStyle="#D2E8D7";	dctx.fill();
drawRect(xr-375,yr,460,20);
drawMajorGridlines(xr-375,yr);
drawGridlines(xr-375,yr);
drawMinorGridlines(xr-375,yr);
dctx.scale(1/15,1/15);
dctx.restore();}
function drawRect(rectX,rectY,rectWidth,rectHeight){
dctx.beginPath();
dctx.moveTo(rectX, rectY+cornerRadius);
dctx.arcTo(rectX , rectY, rectX + cornerRadius, rectY, cornerRadius);
dctx.lineTo(rectX+rectWidth-cornerRadius,rectY);
dctx.arcTo(rectX + rectWidth, rectY, rectX + rectWidth, rectY + cornerRadius, cornerRadius);
dctx.lineTo(rectX+rectWidth,rectY+rectHeight-cornerRadius);
dctx.arcTo(rectX + rectWidth, rectY+rectHeight, rectX + rectWidth-cornerRadius, rectY + rectHeight, cornerRadius);
dctx.lineTo(rectX + cornerRadius, rectY+rectHeight);
dctx.arcTo(rectX, rectY+rectHeight, rectX , rectY +rectHeight-cornerRadius, cornerRadius);
dctx.lineTo(rectX,rectY+cornerRadius);
dctx.closePath();
var grd=dctx.createLinearGradient(rectX,rectY,rectX+rectWidth,rectY+rectHeight);
grd.addColorStop(0,"#f4f4f4");
grd.addColorStop(1,"#fff");
dctx.fillStyle=grd;
dctx.fill();
dctx.strokeStyle="#59A8A4";
dctx.lineWidth=0.1;
dctx.stroke();
}
/*function showCoords(e) {
  mx = (e.pageX-d.offsetLeft)/scale;
 my = (e.pageY-d.offsetTop)/scale;
    var coords = "X coords: " + mx + ", Y coords: " + my
	document.getElementById("demo").innerHTML = coords;}

d.addEventListener('mousemove', showCoords, false); */

</script>
</body>
</html>
