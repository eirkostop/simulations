<!DOCTYPE html>

<html>

<head>
  <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Φύλλο εργασίας 2</title>
 		<link rel="stylesheet" href="https://physiquiz.gr/wp-content/uploads/fonts/BPtypewrite.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
	<style>
#pendulumDIV{
     overflow: hidden;
    transition:width 1s;
	-webkit-transition:width 1s;
}
#pendulumControls{transition:visibility 1s  0s;
-webkit-transition:visibility 1s  0s;
}
.half {
    width:50%;
  }
@media only screen and (max-width:500px) {
  /* For mobile phones: */
  .half {
    width:100%;
  }}
.mySlider {width:80%;
    opacity: 0.7;
    -webkit-transition: .2s;
    transition: opacity .2s;
}

.slider:hover {
    opacity: 1;
}

.mySlider::-moz-range-thumb {
  background: #008982;
  cursor: pointer;
  width: 10px;
  border: none;
   left: 0;
}
.myCanvas-button {
    padding: .4em 1em;
    display: inline-block;
    position: relative;
    line-height: normal;
    margin-right: .1em;
    cursor: pointer;
    vertical-align: middle;
    text-align: center;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    overflow: visible;
}
 body{max-width:1000px; margin-left:auto; margin-right:auto; color:#333;
       font-family: BPTypewrite,sans-serif,'Arial Narrow';margin-top:auto;background:transparent; font-size:16px;}
  
</style></head>

<body>
<div style="background:white; border:#ccc 2px solid; border-radius:5px; text-align:center;padding: 5px 0 5px 0;min-height:550px">
  <div class="half" style=" float: left; text-align:center;"><span style="font-weight:bold"> 
  Φύλλο εργασίας 2 <hr style="height:2px;border-width:0;background-color:#ccc"></span></div>
    <div class="half" style=" float: left; text-align:center;" >  
  <span>&copy Περί ΦυσιQuiz</span><hr style="height:2px;border-width:0;background-color:#ccc">
  </div>
  <div class="half" style=" float: left; text-align:center;"><div style="width:100%;">
  <i class="fa fa-play myCanvas-button"  style="color:#333" onclick="startMotion();" title="Έναρξη μέτρησης"></i>
  <i class="fa fa-pause myCanvas-button"  style="color:#333" onclick="stopMotion();" title="Παύση - Καταγραφή μέτρησης"></i>
<i class="fa fa-times myCanvas-button"  style="color:#333" onclick="undoMotion();" title="Ακύρωση Μέτρησης"></i>  
<i class="fa fa-redo myCanvas-button"  style="color:#333" onclick="restartMotion();" title="Επανεκκίνηση Μέτρησης"></i>
<i id="hide-button"class="fa fa-eye-slash myCanvas-button"  style="color:#333" onclick="hideDIV();" title="Κρύψε το εκκρεμές"></i>   
</div>
<div style="width:50%; float: left; text-align:center;">
<canvas style="position:relative; background:white" id="analog" >Please update your browser!</canvas>
</div>
<div style="width:50%; float: left; text-align:center;">
<canvas style="position:relative; background:white" id="digital" >Please update your browser!</canvas>
</div>
<canvas style="position:relative;" id="exercise">Please update your browser!</canvas>
</div>

   <div id="pendulumDIV" class="half" style=" float: left; text-align:center;" >  
  <canvas  id="pendulum" width="497" height="350">Please update your browser!</canvas>
<br>
<div id="pendulumControls" >
    <i class="fa fa-play myCanvas-button"  style="color:#333" onclick="startMotion();" title="Έναρξη μέτρησης"></i>
  <i class="fa fa-pause myCanvas-button"  style="color:#333" onclick="stopMotion();" title="Παύση - Καταγραφή μέτρησης"></i>
<i class="fa fa-times myCanvas-button"  style="color:#333" onclick="undoMotion();" title="Ακύρωση Μέτρησης"></i>  
<i class="fa fa-redo myCanvas-button"  style="color:#333" onclick="restartMotion();" title="Επανεκκίνηση Μέτρησης"></i> 



   <p>Γωνία εκτροπής: <span id="myReadout"></span>&deg.</p>
  <p><input type="range" class="mySlider" id="mySlider" min="-50" max="50" step="1" value="10" oninput="showAngle();drawPendulum();" onchange="showAngle();drawPendulum();"></p>
</div></div>
 &nbsp; 
</div>
<img src="fe2.png" width="400" height="300" style="display:none">
<p id="demo"></p>
<script>
var a=document.getElementById('analog')
var actx = a.getContext("2d");
var d=document.getElementById('digital')
var dctx = d.getContext("2d");
var p=document.getElementById('pendulum')
var pctx = p.getContext("2d");
var x,y,t=0,tt=0;
var pointerX,pointerY,scale=1;
var timer;
var cornerRadius = 5;
	var tmeasurements=[];
	var ttmeasurements=[];
    
	var e = document.getElementById("exercise");
    var ectx = e.getContext("2d");
    var img = new Image();
    img.src="fe2.png";
	var newWidth;
	
				var theta,xx=250,yy=210;


	

			initialize();
 
			function initialize() {
				window.addEventListener('resize', resizeCanvas, false);
				resizeCanvas();
			}
			function resizeCanvas() {
			if(window.innerWidth<1000&window.innerWidth>500){
			scale=window.innerWidth/1000;
			a.width=124*scale;a.height=125*scale; 
			d.width=124*scale;d.height=125*scale; 
			e.width=498*scale;e.height=300*scale; 
			p.width=498*scale;p.height=350*scale; 
			actx.scale(0.5*scale,0.5*scale);
			dctx.scale(0.5*scale,0.5*scale);
			ectx.scale(scale,scale);pctx.scale(scale,scale);}
			if(window.innerWidth<=500){
			scale=window.innerWidth/500;
			a.width=124*scale;a.height=125*scale; 
			d.width=124*scale;d.height=125*scale; 
			e.width=498*scale;e.height=300*scale; 
			p.width=498*scale;p.height=350*scale; 
			actx.scale(0.5*scale,0.5*scale);
			dctx.scale(0.5*scale,0.5*scale);
			ectx.scale(scale,scale);pctx.scale(scale,scale);}
			if(window.innerWidth>=1000){
			a.width = 124; a.height=125;
			actx.scale(0.5,0.5);
			d.width = 124; d.height=125;
			dctx.scale(0.5,0.5);
			e.width = 498; e.height=300;
			p.width = 498; p.height=350;
			}
			drawClock(125,125);drawDigital(125,125);drawPendulum();showAngle();
			ectx.drawImage(img, 0, 0,496,300);
			
			}

			function drawPendulum(){
    var theta0=document.getElementById("mySlider").value;
 xx=250+300*Math.sin(theta0*Math.PI/180*Math.cos(4*tt));
 yy=10+300*Math.cos(theta0*Math.PI/180*Math.cos(4*tt));
pctx.clearRect(0, 0, 1000, 600);
pctx.beginPath();
pctx.moveTo(250,10);
pctx.lineTo(xx,yy);
pctx.strokeStyle="grey";
pctx.lineWidth=1;
pctx.stroke();
pctx.beginPath();
pctx.arc(xx,yy,10,0,2*Math.PI);
var theGradient = pctx.createRadialGradient(
                  xx-1, yy-2, 1, xx, yy, 5);
theGradient.addColorStop(0, "#5BB3AF");
theGradient.addColorStop(1, "#008982");
pctx.fillStyle = theGradient;
pctx.fill();
pctx.beginPath();

var grd=pctx.createLinearGradient(0,0,496,0);
grd.addColorStop(0,"white");
grd.addColorStop(0.5,"#5BB3AF");
grd.addColorStop(1,"white");

  pctx.fillStyle=grd;
  pctx.fillRect(0,0,500,10);

  }

function drawClock (x0,y0){
x=x0+90*Math.cos(2*Math.PI/60*t-Math.PI/2);
y=y0+90*Math.sin(2*Math.PI/60*t-Math.PI/2);
//Draw clock
actx.beginPath();
actx.arc(x0,y0,100,0,2*Math.PI);
actx.lineWidth=2;
actx.fillStyle="#EDFAFF";
actx.fill();
//Draw tickmarks
for (var j=0;j<60;j++){
actx.beginPath();
actx.moveTo(x0+100*Math.cos(2*Math.PI/60*j),y0+100*Math.sin(2*Math.PI/60*j));
actx.lineTo(x0+95*Math.cos(2*Math.PI/60*j),y0+95*Math.sin(2*Math.PI/60*j));
actx.lineWidth=2;
actx.strokeStyle="rgb(91, 179, 175)";
actx.stroke();
}
for (var i=0;i<13;i++){
actx.beginPath();
actx.moveTo(x0+100*Math.cos(2*Math.PI/12*i),y0+100*Math.sin(2*Math.PI/12*i));
actx.lineTo(x0+80*Math.cos(2*Math.PI/12*i),y0+80*Math.sin(2*Math.PI/12*i));
actx.lineWidth=2;
actx.strokeStyle="rgb(91, 179, 175)";
actx.stroke();
}
//Draw indexes
actx.beginPath();
actx.moveTo(x0,y0);
actx.lineTo(x,y);
actx.lineWidth=3;
actx.strokeStyle="#333";
actx.stroke();
actx.beginPath();
actx.arc(x,y,2,0,2*Math.PI);
actx.arc(x0,y0,2,0,2*Math.PI);
actx.fillStyle="#333";
actx.fill();

}

function drawDigital(x0,y0){

//Draw clock
dctx.beginPath();
dctx.arc(x0,y0,100,0,2*Math.PI);
dctx.lineWidth=2;
dctx.fillStyle="#EDFAFF";
dctx.fill();
drawScreen(x0-80,y0-40,160,80);

}


function moveClock(){
  dctx.clearRect(0,0,d.width,d.height);
  actx.clearRect(0,0,a.width,a.height);
tt=new Date().getTime()/1000-start+pauseTime;
t=tt.toFixed(0);
timer=window.setTimeout(moveClock,1000/60);
drawClock(125,125);drawDigital(125,125);drawPendulum();
	}
var start,pauseTime=0;
	 function startMotion(){
	 start=new Date().getTime()/1000;
  window.clearTimeout(timer);

 moveClock();}
 
  function stopMotion(){
  pauseTime=tt;
 window.clearTimeout(timer);
  tmeasurements.push(t);
  ttmeasurements.push(tt.toFixed(2));
writemeasurements();
	
}

function writemeasurements(){
if(tmeasurements.length<11){
  	ectx.beginPath();
	ectx.fillStyle="#008982";
	ectx.font="16px BPTypeWrite";
	ectx.fillText(tmeasurements[tmeasurements.length-1],90,90+19*(tmeasurements.length-1));
	ectx.fillText(ttmeasurements[ttmeasurements.length-1],310,90+19*(ttmeasurements.length-1));

	var tsum=0,ttsum=0;n=0;
	for (i=0; i<tmeasurements.length; i++){tsum+=Number(tmeasurements[i]);ttsum+=Number(ttmeasurements[i]);n++}
	ectx.clearRect(70,270,95,20);
	ectx.clearRect(290,270,95,20);
	ectx.clearRect(190,150,70,20);
	ectx.clearRect(400,150,70,20);
	ectx.fillText(tsum,90,290);
	ectx.fillText(ttsum.toFixed(2),310,290);
	ectx.fillText((ttsum/n).toFixed(2),420,170);
	ectx.fillText((tsum/n).toFixed(0),210,170);
	}
}
  function restartMotion(){
   x=50;y=100;
	t=0;tt=0;
		drawClock(125,125);	drawDigital(125,125);drawPendulum();
 window.clearTimeout(timer);
 pauseTime=0;
 }
 
 function undoMotion(){if(tmeasurements.length<11&&tmeasurements.length>0){
 	ectx.clearRect(70,270,95,20);
	ectx.clearRect(290,270,95,20);
	ectx.clearRect(190,150,70,20);
	ectx.clearRect(400,150,70,20);
	ectx.clearRect(90,75+19*(tmeasurements.length-1),50,16);
	ectx.clearRect(300,75+19*(tmeasurements.length-1),70,16);
	tmeasurements.pop();ttmeasurements.pop();}}
//Draw screen
function drawScreen(rectX,rectY,rectWidth,rectHeight){
dctx.beginPath();
	  dctx.moveTo(rectX, rectY+cornerRadius);
	  dctx.arcTo(rectX , rectY, rectX + cornerRadius, rectY, cornerRadius);
	  dctx.lineTo(rectX+rectWidth-cornerRadius,rectY);
	  dctx.arcTo(rectX + rectWidth, rectY, rectX + rectWidth, rectY + cornerRadius, cornerRadius);
	  dctx.lineTo(rectX+rectWidth,rectY+rectHeight-cornerRadius);
	  dctx.arcTo(rectX + rectWidth, rectY+rectHeight, rectX + rectWidth-cornerRadius, rectY + rectHeight, cornerRadius);
	  	  dctx.lineTo(rectX + cornerRadius, rectY+rectHeight);
	  dctx.arcTo(rectX, rectY+rectHeight, rectX , rectY +rectHeight-cornerRadius, cornerRadius);
	  dctx.lineTo(rectX,rectY+cornerRadius);
	  dctx.closePath();
	 
	  var grd=dctx.createLinearGradient(rectX,rectY,rectX+rectWidth,rectY+rectHeight);
	  grd.addColorStop(0,"#f4f4f4");
	grd.addColorStop(1,"#fff");
	 dctx.fillStyle=grd;
	 dctx.fill();
	 	 dctx.strokeStyle="#59A8A4";
	 dctx.stroke();
	 //Draw Digits
	 dctx.beginPath();
	 dctx.fillStyle="#333";
	 dctx.font="40px BPTypeWrite";
	 dctx.fillText(tt.toFixed(2)+"s",rectX+10,rectY+rectHeight/2+20);
	 dctx.fill();
	}
	
	function showAngle() {
 document.getElementById("myReadout").innerHTML=Number(mySlider.value).toFixed(0);}

function hideDIV(){
this.toggle = !this.toggle;
    var target = document.getElementById('pendulumDIV');
    if( this.toggle) {		
        newWidth=target.style.width;
		target.style.width= 0+"px";
		document.getElementById('pendulumControls').style.display="none";
		document.getElementById('hide-button').classList.remove("fa-eye-slash");
		document.getElementById('hide-button').classList.add("fa-eye");
		document.getElementById('hide-button').title="Δείξε το εκκρεμές";
    }
    else {
        target.style.width =newWidth;
         
setTimeout(function(){
document.getElementById('pendulumControls').style.display="inline-block"},1000)	
		document.getElementById('hide-button').classList.remove("fa-eye");
		document.getElementById('hide-button').classList.add("fa-eye-slash");
		document.getElementById('hide-button').title="Κρύψε το εκκρεμές";
			
    }
}


</script>

</body>
</html>